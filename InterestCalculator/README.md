## 利息计算
本套代码为9.1 章概念挖掘中提到的案例:
故事以一家假想的金融公司为背景，该公司经营商业贷款和其他一些生息资产。公司开发了一个用于跟踪这些投资及收益的应用程序，通过一项一项地添加功能来使它不断地发展。每天晚上，公司都会运行一个批处理脚本，用于计算当天所生成的利息和费用，并把它们相应地记录到公司的财务软件中。
模型经过了如下迭代

### V0

![ddd-9.1.2-利息模型-0.1.drawio.png](./src/main/resources/model/ddd-9.1.2-%E5%88%A9%E6%81%AF%E6%A8%A1%E5%9E%8B-0.1.drawio.png)
开始需求是每天计算一遍每笔资产对应的手续费和利息，最初识别到的模型就是资产和收益还有手续费。
代码如V0包下的代码所示
这个时候出现了一些问题：
代码质量可读性相关：

1. 代码中有大量的if else，这样的代码不易维护，也不易扩展
2. 代码中有大量的重复代码，比如计算利息和手续费的代码，这样的代码不易维护，也不易扩展
扩展性的问题 
1. 如果调整资产的利率和手续费，那么需要修改大量的代码，这样的代码不易维护，也不易扩展
维护性问题
1. 变更了手续费和资产的计算类型和基础计算数值无法追溯
5. 如果发生没有登记支付历史的情况难以追溯和复原（比如难以重新提交支付申请）
  因此在模型上做了如下的调整，拆分了Asset，模型如下

### V1

![ddd-9.1.2-利息模型-V1.0.drawio.png](./src/main/resources/model/ddd-9.1.2-%E5%88%A9%E6%81%AF%E6%A8%A1%E5%9E%8B-V1.0.drawio.png)

### V2

![ddd-9.1.2-利息模型-V1.1.drawio.png](./src/main/resources/model/ddd-9.1.2-%E5%88%A9%E6%81%AF%E6%A8%A1%E5%9E%8B-V1.1.drawio.png)

### V3

![ddd-9.1.2-利息模型-V2.0.drawio.png](./src/main/resources/model/ddd-9.1.2-%E5%88%A9%E6%81%AF%E6%A8%A1%E5%9E%8B-V2.0.drawio.png)